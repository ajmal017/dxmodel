%legend
  Signals from EOD 
  = @date.strftime("%B %d, %Y").to_s if @date

- dates = StockDate.select('distinct date').order('date DESC').collect(&:date)
= select_tag 'date', options_for_select(['Change date'] + dates.each{|d| [d, d] })

%table#signals
  %thead
    %tr
      %th Ticker
      %th Country
      %th Name
      %th Industry
      %th{:class => "long {sorter: false}"}

    %tbody
      - (@enter_signals + @exit_signals).each do |trade|
        %tr
          %td= link_to trade.stock.ticker, stock_path(trade.stock_id)
          %td= trade.stock.country
          %td= link_to trade.stock.name, stock_path(trade.stock_id)
          %td
            %small= trade.industry.name

          %td= render partial: 'actions', locals: {trade: trade}



  :javascript
    $(document).ready(function() {
      $('table').tablesorter({theme: 'blue'});

       $('#date').change(function(){
         var newURL = window.location.protocol + "//" + window.location.host + "/trades/signaled?date=" + $(this).val()
         window.location = newURL
       })
    })
